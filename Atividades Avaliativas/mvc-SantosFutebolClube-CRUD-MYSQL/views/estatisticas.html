{% extends 'base.html' %}

{% block content %}
<div class="row">
    <div class="col-12 text-center mb-4">
        <h2 class="text-success">üìä Estat√≠sticas do Santos</h2>
        <p class="lead">Conquistas hist√≥ricas e desempenho atual do clube</p>
    </div>
</div>

<div class="row">
    <div class="col-md-5 mb-4">
        <div class="card shadow">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0">‚ûï Adicionar Nova Estat√≠stica</h4>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="mb-3">
                        <label for="ano" class="form-label">Ano:</label>
                        <input type="number" class="form-control" id="ano" name="ano" 
                               placeholder="Ex: 2024" min="1900" max="2030" required>
                    </div>
                    <div class="mb-3">
                        <label for="competicao" class="form-label">Competi√ß√£o:</label>
                        <input type="text" class="form-control" id="competicao" name="competicao" 
                               placeholder="Ex: Brasileir√£o, Copa do Brasil" required>
                    </div>
                    <div class="mb-3">
                        <label for="resultado" class="form-label">Resultado:</label>
                        <input type="text" class="form-control" id="resultado" name="resultado" 
                               placeholder="Ex: Campe√£o, Vice-campe√£o, 3¬∫ lugar" required>
                    </div>
                    <button type="submit" class="btn btn-success w-100">Adicionar Estat√≠stica</button>
                </form>
            </div>
        </div>
        
        <div class="card shadow mt-4">
            <div class="card-header bg-warning text-dark">
                <h5 class="mb-0">üèÜ Recordes Hist√≥ricos</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li class="mb-2">‚úÖ <strong>Pentacampeonato:</strong> 1961-1965 (√∫nico clube brasileiro)</li>
                    <li class="mb-2">‚úÖ <strong>Tricampeonato invicto:</strong> 1963, 1964 e 1965</li>
                    <li class="mb-2">‚úÖ <strong>Seis finais consecutivas:</strong> 1961-1966</li>
                    <li class="mb-2">‚úÖ <strong>8 t√≠tulos brasileiros</strong> no total</li>
                    <li class="mb-2">‚úÖ <strong>103 gols em 46 jogos</strong> (2004)</li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="col-md-7 mb-4">
        <div class="card shadow">
            <div class="card-header bg-info text-white">
                <h4 class="mb-0">üìã Hist√≥rico Completo</h4>
            </div>
            <div class="card-body">
                {% if estatisticas %}
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th>#</th>
                                    <th>Ano</th>
                                    <th>Competi√ß√£o</th>
                                    <th>Resultado</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for estatistica in estatisticas %}
                                    <tr>
                                        <td><span class="badge bg-primary">{{ loop.index }}</span></td>
                                        <td><strong>{{ estatistica.Ano }}</strong></td>
                                        <td>{{ estatistica.Competi√ß√£o }}</td>
                                        <td>
                                            {% if 'Campe√£o' in estatistica.Resultado %}
                                                <span class="badge bg-warning text-dark">üèÜ {{ estatistica.Resultado }}</span>
                                            {% elif 'Vice-campe√£o' in estatistica.Resultado %}
                                                <span class="badge bg-secondary">ü•à {{ estatistica.Resultado }}</span>
                                            {% elif 'Rebaixamento' in estatistica.Resultado %}
                                                <span class="badge bg-danger">üìâ {{ estatistica.Resultado }}</span>
                                            {% elif 'Acesso' in estatistica.Resultado %}
                                                <span class="badge bg-success">‚¨ÜÔ∏è {{ estatistica.Resultado }}</span>
                                            {% elif 'Em Andamento' in estatistica.Resultado %}
                                                <span class="badge bg-info">üîÑ {{ estatistica.Resultado }}</span>
                                            {% else %}
                                                <span class="badge bg-info">{{ estatistica.Resultado }}</span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <p class="text-muted text-center">Nenhuma estat√≠stica cadastrada ainda.</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-12">
        <div class="alert alert-warning">
            <h5>üèÖ Conquistas Hist√≥ricas</h5>
            <p class="mb-0">O Santos √© um dos clubes mais vencedores do Brasil com 8 t√≠tulos nacionais, 
            incluindo o hist√≥rico pentacampeonato consecutivo (1961-1965) e o tricampeonato invicto (1963-1965). 
            Em 2004, o clube marcou 103 gols em 46 jogos, estabelecendo um recorde hist√≥rico.</p>
        </div>
    </div>
</div>

<div class="row mt-3">
    <div class="col-md-6">
        <div class="alert alert-success">
            <h6>üìà Temporada 2024</h6>
            <p class="mb-0">O Santos sagrou-se campe√£o da S√©rie B com 68 pontos, garantindo o acesso de volta √† elite 
            com duas rodadas de anteced√™ncia, demonstrando a for√ßa do clube mesmo em momentos dif√≠ceis.</p>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="alert alert-danger">
            <h6>‚ö†Ô∏è Situa√ß√£o Atual 2025</h6>
            <p class="mb-0">Em outubro de 2025, o clube ocupa a 16¬™ posi√ß√£o com 28 pontos em 26 jogos, 
            situa√ß√£o preocupante ap√≥s a derrota de 3x0 para o Cear√°, o Santos tem apenas mais 12 jogos para tentar se manter na S√©rie A.</p>
        </div>
    </div>
</div>
<!-- Se√ß√£o de Partidas Recentes -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0">‚öΩ Partidas Recentes</h4>
            </div>
            <div class="card-body">
                {% if partidas.items %}
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-dark">
                                <tr>
                                    <th>Data</th>
                                    <th>Competi√ß√£o</th>
                                    <th>Mandante</th>
                                    <th>Placar</th>
                                    <th>Visitante</th>
                                    <th>Detalhes</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for partida in partidas.items %}
                                    <tr>
                                        <td>{{ partida.data.strftime('%d/%m/%Y') }}</td>
                                        <td>{{ partida.competicao }}</td>
                                        <td>
                                            <a href="{{ url_for('time_jogadores', id=partida.time_mandante_id) }}" class="text-decoration-none">
                                                {{ partida.time_mandante.nome }}
                                            </a>
                                        </td>
                                        <td class="text-center">
                                            <span class="badge bg-dark">
                                                {{ partida.gols_mandante }} x {{ partida.gols_visitante }}
                                            </span>
                                        </td>
                                        <td>
                                            <a href="{{ url_for('time_jogadores', id=partida.time_visitante_id) }}" class="text-decoration-none">
                                                {{ partida.time_visitante.nome }}
                                            </a>
                                        </td>
                                        <td>
                                            {% if partida.gols_mandante > partida.gols_visitante %}
                                                {% if partida.time_mandante_id == santos_id %}
                                                    <span class="badge bg-success">Vit√≥ria</span>
                                                {% else %}
                                                    <span class="badge bg-danger">Derrota</span>
                                                {% endif %}
                                            {% elif partida.gols_mandante < partida.gols_visitante %}
                                                {% if partida.time_visitante_id == santos_id %}
                                                    <span class="badge bg-success">Vit√≥ria</span>
                                                {% else %}
                                                    <span class="badge bg-danger">Derrota</span>
                                                {% endif %}
                                            {% else %}
                                                <span class="badge bg-secondary">Empate</span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                    
                    <!-- Pagina√ß√£o -->
                    <nav aria-label="Navega√ß√£o de partidas">
                        <ul class="pagination justify-content-center">
                            {% if partidas.has_prev %}
                                <li class="page-item">
                                    <a class="page-link" href="{{ url_for('estatisticas_rota', page=partidas.prev_num) }}">Anterior</a>
                                </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link">Anterior</span>
                                </li>
                            {% endif %}
                            
                            {% for num in partidas.iter_pages() %}
                                {% if num %}
                                    {% if num == partidas.page %}
                                        <li class="page-item active">
                                            <span class="page-link">{{ num }}</span>
                                        </li>
                                    {% else %}
                                        <li class="page-item">
                                            <a class="page-link" href="{{ url_for('estatisticas_rota', page=num) }}">{{ num }}</a>
                                        </li>
                                    {% endif %}
                                {% else %}
                                    <li class="page-item disabled">
                                        <span class="page-link">...</span>
                                    </li>
                                {% endif %}
                            {% endfor %}
                            
                            {% if partidas.has_next %}
                                <li class="page-item">
                                    <a class="page-link" href="{{ url_for('estatisticas_rota', page=partidas.next_num) }}">Pr√≥ximo</a>
                                </li>
                            {% else %}
                                <li class="page-item disabled">
                                    <span class="page-link">Pr√≥ximo</span>
                                </li>
                            {% endif %}
                        </ul>
                    </nav>
                {% else %}
                    <div class="alert alert-info">
                        <p class="mb-0 text-center">Nenhuma partida registrada ainda. <a href="{{ url_for('partidas') }}" class="alert-link">Adicionar partidas</a></p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock content %}
